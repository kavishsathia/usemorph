manifest:
  version: "0.1.3"
  schema: https://a2as.org/cert/schema
  subject:
    name: kavishsathia/usemorph
    source: https://github.com/kavishsathia/usemorph
    branch: main
    commit: "cd2a6bdd"
    scope: [python/agent.py, python/event.py, python/run.py, python/tools.py]
  issued:
    by: A2AS.org
    at: '2026-02-11T16:56:21Z'
    url: https://a2as.org/certified/agents/kavishsathia/usemorph
  signatures:
    digest: sha256:JplP03WUE6ZZV0gzYfgTZDDuoVIx7HBLO6BjNDNuuXk
    key: ed25519:dcPcM7JLnrr8tRsDuD5y2fL3DcuiJbdV2x4gzyTZAlM
    sig: ed25519:fBhkHHd604-ruxVSwbpOwqr04mkZt7TosMmDCqnsZOjpuUitNnGsVfRHNHqh-w2-Z5iypwNht4PBTW-Rm2IxCg

agents:
  agent:
    type: instance
    models: [gemini-2.0-flash]
    tools: [tools]
    params:
      name: morph
      description: A tutoring agent that creates interactive simulations to help students learn through exploration.
      instruction: ''
      after_model_callback: after_model_callback
      before_tool_callback: before_tool_callback
      after_agent_callback: after_agent_callback
      function: create_agent

models:
  gemini-2.0-flash:
    type: literal
    agents: [agent]

tools:
  tools:
    type: function
    agents: [agent]
    params:
      dynamic: "True"

imports:
  Agent: google.adk.agents.Agent
  Any: typing.Any
  asyncio: asyncio
  BaseTool: google.adk.tools.base_tool.BaseTool
  CallbackContext: google.adk.agents.callback_context.CallbackContext
  Contract: sworn.Contract
  CONVERSATION_SCENARIOS: traffic_seed.CONVERSATION_SCENARIOS
  ConversationScenario: traffic_seed.ConversationScenario
  create_agent: agent.create_agent
  create_contract: contract.create_contract
  create_tools: tools.create_tools
  DatadogObservability: sworn.DatadogObservability
  defaultdict: collections.defaultdict
  Dict: typing.Dict
  FunctionTool: google.adk.tools.FunctionTool
  InMemorySessionService: google.adk.sessions.InMemorySessionService
  json: json
  load_dotenv: dotenv.load_dotenv
  Message: run.Message
  Optional: typing.Optional
  os: os
  Path: pathlib.Path
  random: random
  requests: requests
  run_conversation: run.run_conversation
  Runner: google.adk.Runner
  send_event: event.send_event
  STUDENT_PERSONAS: traffic_seed.STUDENT_PERSONAS
  sys: sys
  time: time
  ToolCall: sworn.ToolCall
  ToolContext: google.adk.tools.tool_context.ToolContext
  traceback: traceback
  TRAFFIC_PATTERNS: traffic_seed.TRAFFIC_PATTERNS
  TrafficPattern: traffic_seed.TrafficPattern
  TypedDict: typing.TypedDict
  types: google.genai.types
  uuid: uuid

functions:
  __init__:
    type: sync
    module: python.traffic_generator
    args: [self]
  _validate_response:
    type: sync
    module: python.tools
    args: [response]
    params:
      returns: dict
  after_agent_callback:
    type: sync
    module: python.agent
    args: [callback_context]
  after_model_callback:
    type: sync
    module: python.agent
    args: [callback_context, llm_response]
  before_tool_callback:
    type: sync
    module: python.agent
    args: [tool, args, tool_context]
  build_system_instruction:
    type: sync
    module: python.agent
    args: [settings, module]
    params:
      returns: str
  close_window:
    type: sync
    module: python.tools
    args: [window_tag]
    params:
      returns: dict
  create_agent:
    type: sync
    module: python.agent
    args: [settings, chat_id, contract, execution, module]
    params:
      returns: Agent
  create_tools:
    type: sync
    module: python.tools
    args: [chat_id, contract]
    params:
      returns: list
  create_window:
    type: sync
    module: python.tools
    args: [window_tag, srcdoc, title]
    params:
      returns: dict
  format_history_for_agent:
    type: sync
    module: python.run
    args: [history]
    params:
      returns: str
  generate_traffic:
    type: async
    module: python.traffic_generator
    args: [pattern_name, scenario_filter]
  list_patterns:
    type: async
    module: python.traffic_generator
  main:
    type: async
    module: python.main
    params:
      returns: None
  minimize_window:
    type: sync
    module: python.tools
    args: [window_tag]
    params:
      returns: dict
  parse_input:
    type: sync
    module: python.main
    params:
      returns: TaskInput
  print_summary:
    type: sync
    module: python.traffic_generator
    args: [self]
  record_conversation:
    type: sync
    module: python.traffic_generator
    args: [self, scenario_title, persona, turns, expected_triggers, success]
  replace_src_in_window:
    type: sync
    module: python.tools
    args: [window_tag, new_srcdoc, old_srcdoc]
    params:
      returns: dict
  run_conversation:
    type: async
    module: python.run
    args: [contract, settings, chat_id, message, history, module]
  run_multi_turn_conversation:
    type: async
    module: python.traffic_generator
    args: [scenario, pattern, stats]
    params:
      returns: bool
  send_event:
    type: sync
    module: python.event
    args: [chat_id, event_type, message, metadata]
  show_scenarios:
    type: async
    module: python.traffic_generator

variables:
  API_BASE_URL:
    type: env
    params:
      caller: [os.getenv]
      path: [env_path]
  COMMS_API_KEY:
    type: env
    params:
      caller: [os.getenv]
      path: [env_path]

files:
  .env.local:
    type: literal
    actions: [read]
    params:
      path: [Path.parent.parent]
